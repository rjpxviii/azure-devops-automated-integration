flowchart TB
    subgraph "Development"
        Dev_Commit["Developer Commit"]
        PR["Pull Request"]
        Code_Review["Code Review"]
        Auto_Tests["Automated Tests"]
    end
    
    subgraph "CI Pipeline"
        Build["Build Application"]
        Unit_Tests["Unit Tests"]
        Code_Analysis["Code Analysis\nSonarQube"]
        Sec_Scan["Security Scan"]
        Package["Package\nApplication"]
    end
    
    subgraph "CD Pipeline"
        subgraph "Dev Environment"
            Dev_Deploy["Deploy to Dev"]
            Dev_Tests["Run Tests"]
            Dev_Metrics["Collect Metrics"]
        end
        
        subgraph "Staging Environment"
            Staging_Deploy["Deploy to Staging"]
            E2E_Tests["E2E Tests"]
            Load_Tests["Load Tests"]
            Perf_Tests["Performance Tests\nLighthouse"]
            Stage_Approval["Manual Approval"]
        end
        
        subgraph "Production Environment"
            Prod_Deploy["Deploy to Production"]
            CDN_Purge["Purge CDN"]
            Smoke_Tests["Smoke Tests"]
            Monitoring["Post-Deployment\nMonitoring"]
        end
    end
    
    Dev_Commit --> PR
    PR --> Code_Review
    PR --> Auto_Tests
    Code_Review --> Build
    Auto_Tests --> Build
    
    Build --> Unit_Tests
    Unit_Tests --> Code_Analysis
    Code_Analysis --> Sec_Scan
    Sec_Scan --> Package
    
    Package --> Dev_Deploy
    Dev_Deploy --> Dev_Tests
    Dev_Tests --> Dev_Metrics
    Dev_Metrics --> Staging_Deploy
    
    Staging_Deploy --> E2E_Tests
    E2E_Tests --> Load_Tests
    Load_Tests --> Perf_Tests
    Perf_Tests --> Stage_Approval
    Stage_Approval --> Prod_Deploy
    
    Prod_Deploy --> CDN_Purge
    CDN_Purge --> Smoke_Tests
    Smoke_Tests --> Monitoring
    
    classDef devphase fill:#D4F1F9,stroke:#05445E,stroke-width:2px
    classDef ciphase fill:#FFEED9,stroke:#7D5A50,stroke-width:2px
    classDef cdphase fill:#E7FBBE,stroke:#4C6793,stroke-width:2px
    classDef devenv fill:#B5EAEA,stroke:#05445E,stroke-width:1px
    classDef stageenv fill:#FFBCBC,stroke:#7D5A50,stroke-width:1px
    classDef prodenv fill:#D8F8B7,stroke:#4C6793,stroke-width:1px
    
    class Dev_Commit,PR,Code_Review,Auto_Tests devphase
    class Build,Unit_Tests,Code_Analysis,Sec_Scan,Package ciphase
    class Dev_Deploy,Dev_Tests,Dev_Metrics,Staging_Deploy,E2E_Tests,Load_Tests,Perf_Tests,Stage_Approval,Prod_Deploy,CDN_Purge,Smoke_Tests,Monitoring cdphase
    class Dev_Deploy,Dev_Tests,Dev_Metrics devenv
    class Staging_Deploy,E2E_Tests,Load_Tests,Perf_Tests,Stage_Approval stageenv
    class Prod_Deploy,CDN_Purge,Smoke_Tests,Monitoring prodenv